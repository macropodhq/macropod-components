@import 'input-generics';
@import "colors";
@import "placeholders";

$color-border: $color-catskill-white;
$color-option-hover: $color-gallery;
$color-option-text: $color-scorpion;
$color-glow: $color-border;

$line-height: 1.94em;

$border-radius: 4px;
$border-radius-sm: 3px;

$input-color: #555;
$input-height: $line-height;
$input-bg: $color-white;
$input-bg-disabled: #eee;
$input-border: #ccc;
$input-border-focus: #66afe9;
$input-border-width: 1px;
$input-border-radius: $border-radius;

.rw-multiselect {
  position: relative;

  &.rw-widget {
    @include text-input-style;
    height: auto;
    padding: 0;
    position: relative;
    outline: 0;
    -moz-background-clip: border-box;
    -webkit-background-clip: border-box;
    background-clip: border-box;
    background-color: $input-bg;
    border: $input-border $input-border-width solid;
    border-radius: $input-border-radius;

    .rw-input {
      border-top-left-radius: $input-border-radius;
      border-bottom-left-radius: $input-border-radius;
      max-width: 100%;
    }

    > .rw-select {
      border-left: $input-border 1px solid;
    }

    &.rw-state-focus,
    &.rw-state-focus:hover {
      box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px opacify($input-border-focus, .6);
      border-color: $input-border-focus;
      outline: 0;
    }

    &.rw-state-readonly,
    &.rw-state-readonly > .rw-multiselect-wrapper {
      cursor: not-allowed;
    }

    &.rw-state-disabled {
      &,
      &:hover,
      &:active {
        box-shadow: none;
        background-color: $input-bg-disabled;
        border-color: $input-border;
      }
    }

    &.rw-rtl {

      .rw-input {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        border-top-left-radius: $input-border-radius;
        border-bottom-left-radius: $input-border-radius;
      }

      > .rw-select {
        border-right: $input-border 1px solid;
        border-left: none;
      }
    }
  }

  &:focus, *:focus {
    outline: none;
  }

  .rw-input {
    border: none;
    display: inline;
    float: left;
    background: none;
    padding: 8px 5px 10px 5px;
  }

  .rw-multiselect-wrapper {
    border: 1px solid $color-border;
    border-radius: 3px;
    width: 100%;
    @extend %clearfix;
  }

  .rw-multiselect-taglist {
    margin: 0;
    padding: 0;
    list-style: none;
    color: $color-option-text;

    li {
      background: $color-option-hover;
      border-radius: 3px;
      height: inherit;
      display: inline-block;
      padding: 3px 25px 5px 5px;
      margin: 3px;
      white-space: nowrap;
      float: left;
      max-width: 100%;
      text-overflow: ellipsis;
      overflow: hidden;
      position: relative;

      .rw-btn {
        background: none;
        border: none;
        position: absolute;
        right: 6px;
        top: 4px;
        padding: 0;
      }

      .rw-sr {
        display: none;
      }
    }
  }

  .rw-popup-container {
    width: 100% !important;
    left: 0 !important;
    border: 1px solid $color-border;
    border-radius: 0 0 3px 3px;
    border-top: none;
    background: $color-white;
    box-shadow: 0 2px 5px $color-glow;
    overflow: auto !important;

    .rw-widget {
      width: 100%;
    }

    ul {
      list-style: none;
      margin: 0;
      padding: 5px;

      li {
        padding: 5px;
        color: $color-option-text;

        &:hover, &.rw-state-focus {
          background: $color-option-hover;
          cursor: pointer;
        }

        strong {
          word-break: break-word;
        }
      }
    }
  }

  &.rw-open {
    .rw-multiselect-wrapper {
      box-shadow: 0 0px 5px $color-glow;
      border-bottom-left-radius: 0px;
      border-bottom-right-radius: 0px;
    }
  }

}

html body .rw-select-list .rw-select-wrapper {
  border: 0;
}

html body .rw-multiselect .rw-multiselect-wrapper {
  border: 0;
  padding: 2px;
}

html body .rw-multiselect.rw-open .rw-multiselect-wrapper {
  box-shadow: none;
}

html body .rw-multiselect.rw-widget.rw-state-focus, 
html body .rw-multiselect.rw-widget.rw-state-focus:hover {
  border-color: rgba(#363f4b, .5);
  box-shadow: none;
}

html body .rw-multiselect.rw-widget .rw-input {
  display: inline-block;
  padding: 6px 8px;
  @include text-input-placeholder(.3);
  &:focus {
    @include text-input-placeholder(.15);
  }
}

html body .rw-multiselect .rw-popup-container {
  border-color: rgba(#363f4b, .5);
  width: calc(100% + 2px) !important;
  left: -1px !important;
  top: -2px !important;
  position: relative;
  z-index: 3;
  box-shadow: 0 1px 1px rgba(#363f4b, .1);
}